---
title: "The Impact of Seasonal Changes on Mortality Rates in Toronto"
subtitle: "Death Registry Statistics in Toronto"
author: 
  - Doran Wang
thanks: "Code and data are available at: https://github.com/Wang20030509/Sta304-Term-Paper-1"
date: today
date-format: long
abstract: "This paper analyzes death toll data across four civic centers (Scarborough, North York, Toronto and Etobicoke)) from 2011 to 2023, with the goal of identifying seasonal patterns and regional differences in mortality, which is made available to the public from Open Data Toronto. Utilizing death registry data, we categorized the deaths by season—Winter, Spring, Summer, and Fall—and aggregated the death tolls across the years for each region. The analysis revealed notable variations in mortality trends across both seasons and civic centers. The results show that Winter consistently reported higher death tolls compared to other seasons across most regions. Using visual representations generated through ggplot2, the findings highlight significant regional disparities, which suggest possible influences of environmental or socio-economic factors contributing to seasonal mortality trends."
format: pdf
toc: true
toc-title: "Table of Contents"
number-sections: true
bibliography: references.bib
editor: 
  markdown: 
    wrap: 72
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(ggplot2)
library(dplyr)
library(readr)
library(janitor)
library(opendatatoronto)
library(knitr)
library(here)

raw_data <- read_csv("../data/raw_data/death_registry.csv",
                    show_col_types = FALSE)
data <- read_csv("../data/analysis_data/cleaned_data.csv",
                 show_col_types = FALSE)
total_deaths <- read_csv("../data/analysis_data/summarize_data.csv",
                         show_col_types = FALSE)
avg_death <- read_csv("../data/analysis_data/avg_deaths_by_month.csv",
                      show_col_types = FALSE)
```

# Introduction

Seasonal variations in mortality have been a focus of
public health research for many years, driven by fluctuations in
temperature, disease prevalence, and environmental factors. In colder
regions, such as Toronto, winter months often coincide with increased
mortality, particularly among vulnerable populations like the elderly or
homeless. Numerous studies have linked these seasonal changes to
temperature variations, with colder months typically showing elevated
mortality rates [@citeSeasonality] [@citeSeasonal]

This study examines the impact of seasonal changes on death tolls in
Toronto between 2011 and 2023, utilizing death registry data from Open
Data Toronto. By categorizing deaths by season—Winter, Spring, Summer,
and Fall—and analyzing regional variations across the city's four civic
centers (Scarborough, North York, Toronto, and Etobicoke), the paper
aims to uncover significant trends in mortality rates throughout the
year. Previous studies have shown that temperature plays a significant
role in seasonal mortality [@citeClimate] [@citeBivariate], with cold
winters and heat waves contributing to an increased death toll, but the
exact influence of socio-economic and environmental factors at the local
level remains under-explored [@citeSeasonality] [@citeSeasonal].

Past research has focused heavily on the role of extreme weather events
and temperature variability in driving mortality rates. Findings suggest
that colder months are associated with higher mortality, particularly
due to cardiovascular and respiratory issues exacerbated by low
temperatures [@citeSeasonality]. This paper builds on those findings by
exploring how these seasonal dynamics manifest in a large urban
environment like Toronto, where varying environmental and socio-economic
conditions across different neighborhoods might influence mortality
outcomes [@citeClimate].

The results of this study will offer new insights into seasonal
mortality trends within Toronto and inform public health initiatives
aimed at mitigating mortality spikes during colder months. Understanding
these patterns is crucial for guiding policy decisions and healthcare
resource allocation during high-risk periods [@citeBivariate].

The remainder of this paper is structured as follows. @sec-data
describes the dataset and cleaning methods used in the analysis. @sec-results 
presents the results and key findings, and @sec-discussion offers a discussion of the implications of these results
as well as limitations and potential next steps.

# Data {#sec-data}

Some of our data is of deaths (@fig-deaths), from @deathRegistryData.

## Overview Data

```{r}
#| echo: false
#| eval: true
#| label: tbl-death_registry_data
#| tbl-cap: "Sample Data"
#| warning: false
kable(head(raw_data))

```

## Cleaned Data

```{r}
#| echo: false
#| eval: true
#| label: tbl-cleaned_death_registry_data
#| tbl-cap: "Sample Cleaned Data"
#| warning: false

data |>
  head(5) |>
  kable(col.names = c("ID", "Civic Centre", "Death Toll", "Place of Death", "Year", "Month", "Season"),
    booktabs = TRUE
  )

```


## Summarized Data

```{r}
#| echo: false
#| eval: true
#| label: tbl-summerized_data
#| tbl-cap: "Summarized Data"
#| warning: false
#| tbl-subcap: ["Total Death toll by Season (2011-2023)", "Average Deaths by Month (2011-2023)"]
#| layout-ncol: 2

kable(total_deaths, col.names = c("Season", "Civic Centre", "Death Toll"))

kable(avg_death, col.names = c("Month", "Mean of the Death Toll"))
```

And also planes (@fig-planes). (You can change the height and width, but
don't worry about doing that until you have finished every other aspect
of the paper - Quarto will try to make it look nice and the defaults
usually work well once you have enough text.)

```{r}
#| label: fig-planes
#| fig-cap: Relationship between wing length and width
#| echo: false
#| warning: false
#| message: false


```

# Results {#sec-results}

Our results are summarized in @fig-deaths
Something
Something
Something

```{r warning=FALSE}
#| label: fig-deaths
#| fig-cap: Total Death Toll by Season and Region (2011-2023)
#| echo: false

ggplot(total_deaths, aes(x = season, y = death_licenses, fill = season)) +
  geom_bar(stat = "identity", alpha = 1) +  
  scale_fill_manual(values = c("darkorange", "purple", "cyan4", "red")) +  
  theme_minimal() +
  facet_wrap(~civic_centre, ncol = 2, scales = "free_y") +  
  labs(x = "Season", y = "Total Death Toll", fill = "Season") +
  coord_flip()

```

```{r warning=FALSE}
#| label: fig-Total_Deaths
#| fig-cap: Total Death toll by Season (2011-2023)
#| echo: false

# Plot the total deaths from 2011 to 2024
ggplot(total_deaths, aes(x = season, y = death_licenses, fill = season)) +
  geom_bar(stat = "identity", alpha = 1) +
  scale_fill_manual(values = c("darkorange", "purple", "cyan4", "red")) + 
  theme_minimal() +
  labs(x = "Session", y = "Total Death Toll", fill = "Season") +
  coord_flip()

```

```{r warning=FALSE}
#| label: fig-avg_deaths_by_month
#| fig-cap: Average Death Toll by Month (2011-2023)
#| echo: false

avg_death$month <- factor(avg_death$month, 
                          levels = c("Jan", "Feb", "Mar", "Apr", "May", "Jun", 
                                     "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"))

# Plot the average deaths by month from 2011 to 2023
ggplot(avg_death, aes(x = factor(month), y = death_licenses, fill = factor(month))) +
  geom_bar(stat = "identity", alpha = 1) +
  theme(axis.text.x = element_text(angle = 60, hjust = 1)) +
  theme_minimal() +
  theme_light() +
  labs(x = "Month", y = "Average Death Toll", fill = "Month") 
```

# Discussion {#sec-discussion}

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The
discussion is a chance to show off what you know and what you learnt
from all this.

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {.unnumbered}

\newpage

# References
